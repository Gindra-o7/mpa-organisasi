---
interface NewsCategory {
  name: string;
  active: boolean;
}

const { categories } = Astro.props;
---

<div class="flex flex-wrap justify-center gap-3">
  {
    categories.map((category: NewsCategory) => (
      <button
        class={`px-6 py-2.5 rounded-full font-semibold text-sm transition-all duration-300 ${
          category.active
            ? "bg-gradient-to-r from-[#388E3C] to-[#81D4FA] text-white shadow-lg hover:shadow-xl"
            : "bg-white text-gray-700 border border-gray-200 hover:border-[#388E3C]/30 hover:bg-[#388E3C]/5"
        }`}
        data-category={category.name}
      >
        {category.name}
      </button>
    ))
  }
</div>

<script>
  // Filter functionality
  const filterButtons = document.querySelectorAll('[data-category]');
  const newsCards = document.querySelectorAll('[data-news-category]');

  filterButtons.forEach((button) => {
    button.addEventListener('click', () => {
      const selectedCategory = button.getAttribute('data-category');

      // Update active state
      filterButtons.forEach((btn) => {
        const isActive = btn === button;
        btn.classList.toggle('bg-gradient-to-r', isActive);
        btn.classList.toggle('from-[#388E3C]', isActive);
        btn.classList.toggle('to-[#81D4FA]', isActive);
        btn.classList.toggle('text-white', isActive);
        btn.classList.toggle('shadow-lg', isActive);
        btn.classList.toggle('hover:shadow-xl', isActive);
        btn.classList.toggle('bg-white', !isActive);
        btn.classList.toggle('text-gray-700', !isActive);
        btn.classList.toggle('border', !isActive);
        btn.classList.toggle('border-gray-200', !isActive);
        btn.classList.toggle('hover:border-[#388E3C]/30', !isActive);
        btn.classList.toggle('hover:bg-[#388E3C]/5', !isActive);
      });

      // Filter news cards
      newsCards.forEach((card) => {
        const cardCategory = card.getAttribute('data-news-category');
        if (selectedCategory === 'Semua' || cardCategory === selectedCategory) {
          card.classList.remove('hidden');
          card.style.display = '';
        } else {
          card.classList.add('hidden');
          card.style.display = 'none';
        }
      });
    });
  });
</script>

